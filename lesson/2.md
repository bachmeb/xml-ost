# lesson 2

## References
* http://archive.oreilly.com/oreillyschool/courses/introxml/introxml02.html
* http://xmlsoft.org/XSLT/xsltproc.html

##### Make a new directory
    mkdir ~/git/xml-ost/workspace/two
    
##### Change to the new directory
    cd ~/git/xml-ost/workspace/two

##### Make a new XML document
    vim phonebook.xml
```xml
<?xml version="1.0"?>
<!DOCTYPE PhoneBook>
<PhoneBook>
    <Listing>
       <First>Alex</First>
       <Last>Chilton</Last>
       <Phone>1-800-123-4567</Phone>
    </Listing>
</PhoneBook>
```

##### Validate the syntax
```
xmllint -noout phonebook.xml 
```
*Your DOCTYPE must match the first set of tags in your XML document.*

##### Create an XSL document
    vim phonebook.xsl
```xsl
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="html" 
    media-type="text/html" 
    doctype-public="HTML"
    doctype-system="SYSTEM"
    cdata-section-elements="script style"
    indent="yes" omit-xml-declaration="yes"
    encoding="utf-8"/>


<xsl:template match="/">
   
<html>

<head>
<title>My Phone Book</title>   
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
</head>
  
<body>

    <h4>My Phone Book</h4>
    <xsl:apply-templates select="//Listing" />
    </body>
</html>

</xsl:template>
<xsl:template match="Listing">
    <xsl:apply-templates/>
</xsl:template>
<xsl:template match="First">
    <p>First: <xsl:apply-templates/></p>
</xsl:template>
<xsl:template match="Last">
    <p>Last: <xsl:apply-templates/></p>
</xsl:template>
<xsl:template match="Phone">
    <p>Phone: <xsl:apply-templates/></p>
</xsl:template>
</xsl:stylesheet>
```

##### Validate the syntax
```
xmllint -noout phonebook.xsl 
```

*[XSL is a language that describes a set of transformations that are made on a source XML file. We are using XSL to "preview" our XML as it might be represented in HTML. In other words, this XSL file contains the rules for turning our XML file into HTML.](http://archive.oreilly.com/oreillyschool/courses/introxml/introxml02.html)*

##### Link the XSL file to the XML file
```xml
<?xml version="1.0"?>
<?xml-stylesheet href="./phonebook.xsl" type="text/xsl"?>
<!DOCTYPE PhoneBook>
<PhoneBook>
    <Listing>
       <First>Alex</First>
       <Last>Chilton</Last>
       <Phone>1-800-123-4567</Phone>
    </Listing>
</PhoneBook>
```

##### Process the XML file with xsltproc
*[xsltproc is a command line tool for applying XSLT stylesheets to XML documents. It is part of libxslt, the XSLT C library for GNOME. While it was developed as part of the GNOME project, it can operate independently of the GNOME desktop.](http://xmlsoft.org/XSLT/xsltproc.html)*
```
xsltproc phonebook.xml 
```
```html
<!DOCTYPE html PUBLIC "HTML" "SYSTEM">
<html>
<head>
<title>My Phone Book</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
</head>
<body>
<h4>My Phone Book</h4>
       <p>First: Alex</p>
       <p>Last: Chilton</p>
       <p>Phone: 1-800-123-4567</p>
    </body>
</html>
```

##### Add another person to the phonebook
```
vim phonebook.xml
```
```xml
<?xml version="1.0"?>
<?xml-stylesheet href="phonebook.xsl" type="text/xsl"?>
<!DOCTYPE PhoneBook>
<PhoneBook>
    <Listing>
       <First>Alex</First>
       <Last>Chilton</Last>
       <Phone>1-800-123-4567</Phone>
    </Listing>
    <Listing>
       <First>Laura</First>
       <Last>Chilton</Last>
       <Phone>1-800-234-5678</Phone>
    </Listing>
</PhoneBook>
```

##### Process the XML file with xsltproc
```
xsltproc phonebook.xml 
```
```html
<!DOCTYPE html PUBLIC "HTML" "SYSTEM">
<html>
<head>
<title>My Phone Book</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
</head>
<body>
<h4>My Phone Book</h4>
       <p>First: Alex</p>
       <p>Last: Chilton</p>
       <p>Phone: 1-800-123-4567</p>
    
       <p>First: Laura</p>
       <p>Last: Chilton</p>
       <p>Phone: 1-800-234-5678</p>
    </body>
</html>
```

